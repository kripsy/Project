{{!
    Copyright (C) 2016 Google Inc.
    Licensed under http://www.apache.org/licenses/LICENSE-2.0 <see LICENSE file>
}}

{{#is_allowed 'create' singular context=instance.context}}
    <a href="javascript://" class="{{linkclass}}" 
        {{#if title}}
        rel="tooltip" 
        data-placement="left" 
        data-original-title="{{title}}" 
        {{/if}}
        data-toggle="modal-ajax-form" 
        data-modal-reset="reset" 
        data-modal-class="modal-wide" 
        data-object-singular="{{singular}}" 
        data-object-plural="{{plural}}" 
        data-object-params='{ "{{instance.class.table_singular}}": {"id" : {{instance.id}}, "type" : "{{instance.class.model_singular}}" }, "context": { "id" : {{firstnonempty instance.context.id "null"}}, "href" : "{{instance.context.href}}", "type" : "{{instance.context.type}}" } }'>
            {{content}}
    </a>
{{/is_allowed}}